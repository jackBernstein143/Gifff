<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>GIF Creator</title>
    <style>
        body, html {
            height: 100%;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #0B1215;
            overflow: hidden;
            touch-action: none;
            font-family: Arial, sans-serif;
            color: white;
        }
        .container {
            position: relative;
            width: 328px;  /* Increased from 320px to account for border */
            height: 328px; /* Increased from 320px to account for border */
        }
        #video, #gif {
            width: calc(100% - 8px);  /* Subtract 8px to account for left and right borders */
            height: calc(100% - 8px); /* Subtract 8px to account for top and bottom borders */
            object-fit: cover;
            border-radius: 16px;  /* Reduced from 20px to maintain appearance with border */
            border: 4px solid #567FFB;
            position: absolute;
            top: 0;
            left: 0;
        }
        #gif {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
        }
        .button-container {
            position: fixed;
            bottom: 64px;
            left: 50%;
            transform: translateX(-50%);
            width: 76px;
            height: 76px;
        }
        #record-button, #share-button {
            position: absolute;
            top: 0;
            left: 0;
            width: 76px;
            height: 76px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            transition: transform 0.2s, background-color 0.2s;
        }
        #record-button {
            background-color: #FC495F;
        }
        #record-button.recording {
            transform: scale(1.15);
            background-color: rgba(252, 73, 95, 0.1);
        }
        #share-button {
            display: none;
            background-color: #1A51F4;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' viewBox='0 0 22 22' fill='none'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M9.60604 10.9798L4.3588 9.23072C2.00559 8.44631 0.828979 8.05411 0.828979 7.33335C0.828979 6.61259 2.00559 6.22039 4.3588 5.43598L18.872 0.598259C20.5278 0.046329 21.3557 -0.229636 21.7927 0.20738C22.2297 0.644396 21.9537 1.47229 21.4018 3.12808L16.5641 17.6412C15.7797 19.9945 15.3875 21.1711 14.6667 21.1711C13.9459 21.1711 13.5537 19.9945 12.7693 17.6412L11.0203 12.394L16.7071 6.70712C17.0977 6.3166 17.0977 5.68343 16.7071 5.29291C16.3166 4.90238 15.6835 4.90238 15.2929 5.29291L9.60604 10.9798Z' fill='white'/%3E%3C/svg%3E");
            background-size: 32px;
            background-repeat: no-repeat;
            background-position: center;
        }
        #progress-ring {
            position: absolute;
            top: -8px;
            left: -8px;
            transform: rotate(-90deg);
        }
        #progress-ring circle {
            stroke-dasharray: 237.76;
            stroke-dashoffset: 237.76;
            stroke: #FC495F;
            stroke-width: 8px;
            fill: transparent;
            transition: stroke-dashoffset 0.1s linear;
            stroke-linecap: round;
        }
        #close-button, #flip-button {
            position: absolute;
            width: 32px;
            height: 32px;
            background-size: cover;
            border: none;
            cursor: pointer;
            z-index: 10;
            background-color: transparent;
            filter: drop-shadow(0px 0px 3px rgba(0,0,0,0.5));
        }
        #close-button {
            top: 10px;
            right: 10px;
            background-image: url('https://uploads-ssl.webflow.com/666644756f0e47b6407ce49c/6695d3ac001e82f6fbf3f2a9_Close_round.png');
            display: none;
        }
        #flip-button {
            bottom: 10px;
            right: 10px;
            background-image: url('https://uploads-ssl.webflow.com/666644756f0e47b6407ce49c/669969f71d7fd7241ce7e022_flip_camera_android.png');
        }
        #canvas {
            display: none;
        }
        #caption-input {
            position: absolute;
            bottom: 16px;
            left: 50%;
            transform: translateX(-50%);
            padding: 4px 8px;
            border: none;
            border-radius: 100px;
            background: rgba(255, 255, 255, 0.50);
            backdrop-filter: blur(6px);
            font-size: 16px;
            color: black;
            min-width: 32px;
            width: auto;
            transition: background 0.3s ease;
            text-align: center;
            display: none;
        }
        #caption-input:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.85);
        }
        #caption-input::placeholder {
            color: rgba(0, 0, 0, 0.7);
        }
        #caption-display {
            position: absolute;
            bottom: 16px;
            left: 50%;
            transform: translateX(-50%);
            display: none;
            flex-direction: column;
            align-items: center;
            max-width: 288px;
            word-wrap: break-word;
        }
        .caption-line {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 100px;
            padding: 4px 10px;
            margin: 2px 0;
            color: black;
            font-size: 16px;
            max-width: 100%;
        }
        .circle {
            width: 24px;
            height: 24px;
            background-color: #04CA95;
            border-radius: 50%;
            flex-shrink: 0;
        }
        .text {
            margin-left: 8px;
            color: #FFFFFF;
            font-size: 18px;
            font-weight: bold;
            white-space: nowrap;
            opacity: 0;
            height: 24px; /* Match the circle height */
            line-height: 24px; /* Align text vertically */
        }
        .instruction {
            position: absolute;
            top: -40px; /* 16px gap + 24px circle height */
            left: 0;
            display: flex;
            align-items: center;
            width: 100%;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="instruction">
            <div class="circle"></div>
            <div class="text"></div>
        </div>
        <video id="video" autoplay muted playsinline></video>
        <img id="gif" alt="Generated GIF">
        <button id="close-button"></button>
        <button id="flip-button"></button>
        <div class="button-container">
            <svg id="progress-ring" width="92" height="92">
                <circle r="38" cx="46" cy="46"/>
            </svg>
            <button id="record-button"></button>
            <button id="share-button"></button>
        </div>
        <input type="text" id="caption-input" placeholder="add a caption" maxlength="50">
        <div id="caption-display"></div>
        <canvas id="canvas"></canvas>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gif.js/0.2.0/gif.js"></script>
    <script src="script.js"></script>
</body>
</html>
